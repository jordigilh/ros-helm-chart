{{- $fullName := include "cost-onprem.fullname" . -}}
{{- $namespace := .Release.Namespace -}}

ğŸ‰ Cost Management On-Premise {{ .Chart.Version }} has been deployed successfully!

ğŸ“¦ Release: {{ .Release.Name }}
ğŸ·ï¸  Namespace: {{ $namespace }}
ğŸ–¥ï¸  Platform: OpenShift

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š DEPLOYMENT STATUS

Check deployment status:
  oc get pods -n {{ $namespace }}

Wait for all pods to be ready:
  oc wait --for=condition=ready pod \
    -l app.kubernetes.io/instance={{ .Release.Name }} \
    -n {{ $namespace }} --timeout=300s

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸŒ ACCESS POINTS

OpenShift Routes:
  oc get routes -n {{ $namespace }}

Get Main Route URL:
  export ROUTE_HOST=$(oc get route {{ $fullName }}-ingress -n {{ $namespace }} -o jsonpath='{.spec.host}')
  echo "https://$ROUTE_HOST"

API Endpoints:
  - Cost Management API: /api/cost-management/v1
  - Sources API: /api/cost-management/v1/sources/ (integrated in Koku)
  - Upload API: /api/ingress/*

Health Check:
  curl http://$(oc get route {{ $fullName }}-ingress -n {{ $namespace }} -o jsonpath='{.spec.host}')/api/ingress/ready
  curl http://$(oc get route {{ $fullName }}-main -n {{ $namespace }} -o jsonpath='{.spec.host}')/status

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” AUTHENTICATION

âœ… JWT Authentication: ENABLED

Keycloak Configuration:
{{- if .Values.jwtAuth.keycloak.url }}
  - Keycloak URL: {{ .Values.jwtAuth.keycloak.url }}
{{- else }}
  - Auto-detected via Keycloak CR
{{- end }}
  - Realm: {{ .Values.jwtAuth.keycloak.realm }}

Verify Keycloak connectivity:
  oc get keycloak -A

For authentication setup details:
  https://github.com/insights-onprem/cost-onprem-chart/blob/main/docs/api/keycloak-jwt-authentication-setup.md

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¾ STORAGE

OpenShift Data Foundation (ODF):
  oc get pvc -n {{ $namespace }}

Storage Classes:
  - PostgreSQL: {{ default (include "cost-onprem.storage.class" .) .Values.database.storageClass }}
  - Kafka: {{ default (include "cost-onprem.storage.class" .) .Values.kafka.storageClass }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” TROUBLESHOOTING

View logs:
  # ROS API
  oc logs -n {{ $namespace }} -l app.kubernetes.io/component=ros-api --tail=100

  # ROS Processor
  oc logs -n {{ $namespace }} -l app.kubernetes.io/component=ros-processor --tail=100

  # Ingress
  oc logs -n {{ $namespace }} -l app.kubernetes.io/component=ingress --tail=100

  # Cost Management API
  oc logs -n {{ $namespace }} -l app.kubernetes.io/component=cost-management-api --tail=100

Check service health:
  oc get pods -n {{ $namespace }} -l app.kubernetes.io/instance={{ .Release.Name }}

Common issues:
  - Pods not starting: Check PVC binding status
  - Authentication errors: Verify Keycloak configuration
  - Connection errors: Check service endpoints

Full troubleshooting guide:
  https://github.com/insights-onprem/cost-onprem-chart/blob/main/docs/operations/troubleshooting.md

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š DOCUMENTATION

Complete guides available at:
  https://github.com/insights-onprem/cost-onprem-chart/tree/main/docs

Key resources:
  - Installation Guide: docs/operations/installation.md
  - Configuration Guide: docs/operations/configuration.md
  - JWT Authentication: docs/api/keycloak-jwt-authentication-setup.md
  - Troubleshooting: docs/operations/troubleshooting.md

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Thank you for using Cost Management On-Premise! ğŸš€
